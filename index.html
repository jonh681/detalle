<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Para ti üíò</title>
<style>
  :root{
    --bg1:#0e0f17; --bg2:#151729; --ink:#f6f6ff;
    --pink1:#ff9dd1; --pink2:#ff5fb8;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Arial;
    background:
      radial-gradient(1200px 800px at 70% 10%, #241b3f 0, transparent 60%),
      radial-gradient(1100px 700px at 20% 90%, #1f1840 0, transparent 60%),
      linear-gradient(160deg, var(--bg2), var(--bg1));
    color:var(--ink);
    overflow:hidden;
  }

  /* Capas */
  #bg-canvas{
    position:fixed; inset:0; width:100%; height:100%;
    display:block; background:transparent;
    filter: drop-shadow(0 10px 30px rgba(255,124,194,.25));
    z-index:0;
  }
  .overlay{
    position:fixed; inset:0; display:grid; place-items:end center;
    padding-bottom: clamp(64px, 10vh, 120px);
    pointer-events:none;
    z-index:2; /* texto y bot√≥n por encima del canvas */
  }

  /* T√≠tulo con degradado M√ÅS CLARO */
  h1{
    pointer-events:auto;
    margin:0 0 14px; padding:8px 18px; border-radius:16px;
    font-weight:900; text-align:center;
    font-size: clamp(22px, 4.5vw, 54px);
    background:
      linear-gradient(90deg,
        #ffffff 0%,
        #fff6fb 20%,
        #ffe9f6 40%,
        #ffd9f0 60%,
        #ffe9f6 80%,
        #ffffff 100%);
    -webkit-background-clip:text; background-clip:text;
    color:transparent;
    text-shadow:
      0 0 12px rgba(255,255,255,.60),
      0 3px 18px rgba(255,124,194,.35);
    -webkit-text-stroke: .4px rgba(255,255,255,.35);
    mix-blend-mode: normal;
  }

  /* Bot√≥n */
  .cta{
    pointer-events:auto;
    border:0; padding:14px 26px; border-radius:999px;
    font-size: clamp(16px, 2.3vw, 22px); font-weight:800; cursor:pointer;
    background: radial-gradient(100% 100% at 50% 0%, var(--pink1), var(--pink2));
    color:#1b0e25;
    box-shadow: 0 10px 25px rgba(255,95,184,.45), inset 0 2px 0 rgba(255,255,255,.35);
    transition: transform .15s ease, filter .2s ease;
    margin-top:6px;
  }
  .cta:hover{ transform: translateY(-2px) scale(1.02); filter:saturate(1.1) }
  .cta:active{ transform: translateY(0) scale(.99) }

  /* Overlay de iris (cubre toda la pantalla) */
  .iris-overlay{
    position: fixed; inset: 0; pointer-events: none;
    background: radial-gradient(120% 120% at 50% 50%, #0a1122 0 40%, #101735 60%, #0b0f1c 100%);
    clip-path: circle(0vmax at 50% 50%);
    transition: clip-path .7s ease-in, opacity .7s ease-in;
    z-index: 9999;
    opacity: 0.95;
    background-image:
      radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.5) 0 60%, transparent 61%),
      radial-gradient(1.2px 1.2px at 70% 20%, rgba(255,255,255,.35) 0 60%, transparent 61%),
      radial-gradient(1.4px 1.4px at 55% 75%, rgba(255,255,255,.4) 0 60%, transparent 61%),
      radial-gradient(1px 1px at 15% 85%, rgba(255,255,255,.25) 0 60%, transparent 61%),
      radial-gradient(120% 120% at 50% 50%, #0a1122 0, #0a1122 100%);
  }
  .iris-overlay.open{
    clip-path: circle(150vmax at 50% 50%);
  }
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="overlay">
  <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
    <h1>Toma, solo por bonita ‚ú®</h1>
    <button class="cta" onclick="goBouquet()">Clic aqu√≠</button>
  </div>
</div>

<!-- Three.js -->
<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script>
(() => {
  const canvas = document.getElementById("bg-canvas");
  const scene  = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);

  const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
  camera.position.set(0, 0, 6.2);
  camera.lookAt(0,0,0);

  // ---- Coraz√≥n 3D como nube de puntos (campo impl√≠cito) ----
  function F(x, y, z){
    const a = x*x + (9/4)*y*y + z*z - 1;
    return a*a*a - x*x*z*z*z - (9/80)*y*y*z*z*z;
  }

  function buildHeartPoints(targetCount = 36000){
    const positions = [];
    const colors = [];
    const c = new THREE.Color();
    const min = -1.4, max = 1.4;
    let tries = 0, maxTries = targetCount * 30;

    while (positions.length/3 < targetCount && tries < maxTries){
      tries++;
      const x = THREE.MathUtils.lerp(min, max, Math.random());
      const y = THREE.MathUtils.lerp(min, max, Math.random());
      const z = THREE.MathUtils.lerp(min, max, Math.random());
      if (F(x,y,z) <= 0){
        const S = 1.35;
        positions.push(x*S, y*S, z*S);

        // degrad√© m√°s claro
        const h = 0.92 - 0.08*((y+1.4)/(2.8));
        const s = 0.8;
        const l = 0.70;
        c.setHSL(h, s, l);
        colors.push(c.r, c.g, c.b);
      }
    }

    const geo = new THREE.BufferGeometry();
    geo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
    geo.setAttribute('color',    new THREE.Float32BufferAttribute(colors, 3));
    geo.computeBoundingSphere();
    return geo;
  }

  const heartGeometry = buildHeartPoints(36000);
  const heartMaterial = new THREE.PointsMaterial({
    size: 0.028,
    sizeAttenuation: true,
    vertexColors: true,
    transparent: true,
    opacity: 1.0,
    depthWrite: false,
    blending: THREE.AdditiveBlending
  });
  const heart = new THREE.Points(heartGeometry, heartMaterial);

  // Orientaci√≥n correcta (de pie, punta abajo)
  heart.rotation.set(Math.PI/-2, 0, Math.PI);

  // Pivot para rotaci√≥n vertical pura
  const pivot = new THREE.Object3D();
  pivot.add(heart);
  scene.add(pivot);

  // Halo ambiental sutil
  const haloGeo = new THREE.BufferGeometry();
  const haloCount = 2400;
  const haloPos = new Float32Array(haloCount*3);
  for (let i=0;i<haloCount;i++){
    const r = 2.2 + Math.random()*1.6;
    const theta = Math.random()*Math.PI*2;
    const u = Math.random()*2 - 1;
    const phi = Math.acos(u);
    const x = r * Math.sin(phi) * Math.cos(theta);
    const y = r * Math.sin(phi) * Math.sin(theta);
    const z = r * Math.cos(phi);
    haloPos[i*3+0]=x; haloPos[i*3+1]=y; haloPos[i*3+2]=z;
  }
  haloGeo.setAttribute('position', new THREE.BufferAttribute(haloPos, 3));
  const haloMat = new THREE.PointsMaterial({
    size: 0.01,
    color: 0xffe5f7,
    transparent:true,
    opacity:0.30,
    depthWrite:false,
    blending: THREE.AdditiveBlending
  });
  const halo = new THREE.Points(haloGeo, haloMat);
  scene.add(halo);

  // ---- Animaci√≥n (latido + giro vertical) ----
  let t = 0;
  function animate(){
    requestAnimationFrame(animate);
    t += 0.016;

    const beat = 1 + 0.06*Math.sin(t*2.0) + 0.02*Math.sin(t*6.0);
    heart.scale.set(beat, beat, beat);

    pivot.rotation.y += 0.0032; // giro vertical (eje Y)
    halo.rotation.y  -= 0.0006;

    renderer.render(scene, camera);
  }
  animate();

  // ---- Responsivo ----
  window.addEventListener("resize", () => {
    const w = window.innerWidth, h = window.innerHeight;
    camera.aspect = w/h;
    camera.updateProjectionMatrix();
    renderer.setSize(w, h);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
  });

  // Toque: destello al click
  window.addEventListener('click', () => {
    heartMaterial.opacity = 1.0;
    setTimeout(()=> heartMaterial.opacity = 0.95, 140);
  });
})();
</script>

<!-- Capa del iris -->
<div class="iris-overlay" id="irisOut"></div>

<script>
  // Bot√≥n con transici√≥n ‚Äúiris‚Äù + navegaci√≥n
  function goBouquet(){
    const iris = document.getElementById('irisOut');
    iris.classList.add('open');
    setTimeout(()=>{ window.location.href = 'bouquet.html'; }, 700);
  }
</script>
</body>
</html>
